<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8"/>


    <!--Local repo-->
    <script th:src="@{/js/bower_components/angular/angular.min.js}"></script>
    <script th:src="@{/js/bower_components/angular-route/angular-route.min.js}"></script>
    <script th:src="@{/js/bower_components/angular-resource/angular-resource.min.js}"></script>


    <link rel="stylesheet" th:href="@{/js/bower_components/bootstrap/dist/css/bootstrap.min.css}"/>
    <script th:src="@{/js/bower_components/jquery/dist/jquery.min.js}"></script>
    <script th:src="@{/js/bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>

    <link rel="stylesheet" th:href="@{/js/bower_components/font-awesome/css/font-awesome.min.css}"/>

    <link rel="styleSheet" th:href="@{/js/bower_components/angular-ui-grid/ui-grid.min.css}"/>
    <script th:src="@{/js/bower_components/angular-ui-grid/ui-grid.js}"></script>

    <script th:src="@{/js/bower_components/form.validation/dist/js/formValidation.min.js}"/>
    <script th:src="@{/js/bower_components/form.validation/dist/js/framework/bootstrap.min.js}"/>
    <script th:src="@{/js/bower_components/bootstrap-formhelpers/js/bootstrap-formhelpers-phone.js}"/>

    <link rel="stylesheet" th:href="@{/js/bower_components/AngularJS-Toaster/toaster.min.css}"  />
    <script th:src="@{/js/bower_components/angular-animate/angular-animate.min.js}" ></script>
    <script th:src="@{/js/bower_components/AngularJS-Toaster/toaster.min.js}"></script>


    <!-- Ui-grid opcional
     <script th:src="@{/js/bower_components/angular-ui-grid/ui-grid.css}"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-touch.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-animate.js"></script>
     <script src="http://ui-grid.info/docs/grunt-scripts/csv.js"></script>
     <script src="http://ui-grid.info/docs/grunt-scripts/pdfmake.js"></script>
     <script src="http://ui-grid.info/docs/grunt-scripts/vfs_fonts.js"></script>-->
    <!--Local repo -->

    <!--Global repo
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-resource.js"></script>
    <script src="http://formvalidation.io/vendor/formvalidation/js/formValidation.min.js"></script>
    <script src="http://formvalidation.io/vendor/formvalidation/js/framework/bootstrap.min.js"></script>
    <script src="http://www.freenetmall.com/common/jquery/FormHelpers/docs/assets/js/bootstrap-formhelpers-phone.format.js"></script>
    <script src="http://www.freenetmall.com/common/jquery/FormHelpers/docs/assets/js/bootstrap-formhelpers-phone.js"></script>


    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>

    <script type="text/javascript" th:src="/bower_components/moment/min/moment.min.js"></script>
    <script type="text/javascript" th:src="/bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" th:href="/bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />

    Global repo -->

    <script type="text/javascript" th:src="@{/js/public/offerDetailsServices.js}"/>
    <script type="text/javascript" th:src="@{/js/public/offerDetailsControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/user/addOfferControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/user/addOfferServices.js}"/>
    <script type="text/javascript" th:src="@{/js/public/searchServices.js}"/>
    <script type="text/javascript" th:src="@{/js/public/searchControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/photoServices.js}"/>
    <script type="text/javascript" th:src="@{/js/public/routeProvider.js}"/>
    <script type="text/javascript" th:src="@{/js/public/indexControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/public/indexServices.js}"/>
    <script type="text/javascript" th:src="@{/js/photoControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/angularDemoServices.js}"/>
    <script type="text/javascript" th:src="@{/js/angularDemoControllers.js}"/>
    <script type="text/javascript" th:src="@{/js/errorControllers.js}"/>


    <script type="text/javascript">
        function ShowHideDiv(checkCompany) {
            var companyName = document.getElementById("companyName");
            var companyDesc = document.getElementById("companyDesc");
            if (checkCompany.checked) {
                companyName.style.display = "block";
                companyDesc.style.display = "block";
                $('#registerForm').formValidation('updateStatus', 'companyName', 'NOT_VALIDATED')
                        .formValidation('validateField', 'companyName');
                $('#registerForm').formValidation('updateStatus', 'companyDesc', 'NOT_VALIDATED')
                        .formValidation('validateField', 'companyDesc');
            }
            else {
                companyName.style.display = "none";
                companyDesc.style.display = "none";
                document.getElementById("inputCompanyName").value = "";
                document.getElementById("inputCompanyDesc").value = "";
                $('#registerForm').formValidation('updateStatus', 'companyName', 'NOT_VALIDATED')
                        .formValidation('validateField', 'companyName');
                $('#registerForm').formValidation('updateStatus', 'companyDesc', 'NOT_VALIDATED')
                        .formValidation('validateField', 'companyDesc');
            }
        }
    </script>

    <!-- -->
    <style>
        .registerModalContent {
            padding: 30px;
            max-width: 700px;
            width: 100% !important;
            background-color: #F5F6CE;
            margin: 0 auto;
            border-radius: 4px;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            font-family: Arial;
            font-size: 15px;
        }

        .registerModalContent input[type=text], input[type=password] {
            height: 44px;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
            -webkit-appearance: none;
            background: #fff;
            border: 1px solid #d9d9d9;
            border-top: 1px solid #c0c0c0;
            /* border-radius: 2px; */
            padding: 0 0px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            border-radius: 4px;
        }

        .registerModalContent input[type=text]:hover, input[type=password]:hover {
            border: 1px solid #b9b9b9;
            border-top: 1px solid #a0a0a0;
            -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            border-color: #0d8006;
        }

        .registerSubmit {
            /* border: 1px solid #3079ed; */
            border: 0px;
            color: #fff;
            text-shadow: 0 1px rgba(0, 0, 0, 0.1);
            background-color: #0d8006;
            font-family: Arial;
            width: 50%;
            font-size: 14px;
            /* background-image: -webkit-gradient(linear, 0 0, 0 100%,   from(#4d90fe), to(#4787ed)); */
        }

        .registerSubmit:hover {
            /* border: 1px solid #2f5bb7; */
            border: 0px;
            text-shadow: 0 1px rgba(0, 0, 0, 0.3);
            background-color: #0d8006;
            /* background-image: -webkit-gradient(linear, 0 0, 0 100%,   from(#4d90fe), to(#357ae8)); */
        }

        .loginmodal-container {
            padding: 30px;
            max-width: 350px;
            width: 100% !important;
            background-color: #F5F6CE;
            margin: 0 auto;
            border-radius: 4px;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            font-family: Arial;
        }

        .loginmodal-container h1 {
            text-align: center;
            font-size: 1.8em;
            font-family: Arial;
        }

        .loginmodal-container input[type=submit] {
            width: 100%;
            display: block;
            margin-bottom: 10px;
            position: relative;
            border-radius: 4px;
            background-color: #0d8006;
        }

        .loginmodal-container input[type=text], input[type=password] {
            height: 44px;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
            -webkit-appearance: none;
            background: #fff;
            border: 1px solid #d9d9d9;
            border-top: 1px solid #c0c0c0;
            /* border-radius: 2px; */
            padding: 0 8px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            border-radius: 4px;
        }

        .loginmodal-container input[type=text]:hover, input[type=password]:hover {
            border: 1px solid #b9b9b9;
            border-top: 1px solid #a0a0a0;
            -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            border-color: #0d8006;
        }

        .loginmodal {
            text-align: center;
            font-size: 14px;
            font-family: 'Arial', sans-serif;
            font-weight: 700;
            height: 36px;
            padding: 0 8px;
            /* border-radius: 3px; */
            /* -webkit-user-select: none;
            user-select: none; */
        }

        .loginmodal-submit {
            /* border: 1px solid #3079ed; */
            border: 0px;
            color: #fff;
            text-shadow: 0 1px rgba(0, 0, 0, 0.1);
            background-color: #4d90fe;
            padding: 17px 0px;
            font-family: Arial;
            font-size: 14px;
            /* background-image: -webkit-gradient(linear, 0 0, 0 100%,   from(#4d90fe), to(#4787ed)); */
        }

        .loginmodal-submit:hover {
            /* border: 1px solid #2f5bb7; */
            border: 0px;
            text-shadow: 0 1px rgba(0, 0, 0, 0.3);
            background-color: #357ae8;
            /* background-image: -webkit-gradient(linear, 0 0, 0 100%,   from(#4d90fe), to(#357ae8)); */
        }

        .loginmodal-container a {
            text-decoration: none;
            color: black;
            font-weight: 400;
            text-align: center;
            display: inline-block;
            opacity: 0.6;
            transition: opacity ease 0.5s;
        }

        .login-help {
            font-size: 12px;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">WebSiteName</a>
        </div>
        <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#search/1/">All ofert</a></li>
            <li><a href="#photoDemo">Photo demo</a></li>
            <li><a href="#angularDemo/zmiennaUrl">Angular demo</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="#" data-toggle="modal" data-target="#registerModal"><span
                    class="glyphicon glyphicon-user"></span> Sign Up</a></li>
            <li><a href="#" data-toggle="modal" data-target="#login-modal"><span
                    class="glyphicon glyphicon-log-in"></span> Login</a></li>
        </ul>
    </div>
</nav>


<div ng-app="mainApp">


    <div ng-view="true"></div>

    <!-- Login-->
    <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true"
         style="display: none;"
         ng-controller="LoginController">
        <div class="modal-dialog">
            <div class="loginmodal-container">

                <h1>Login with Username and Password</h1>

                <form name='f' action='/login' method='POST'>
                    <input type='text' name='username' value='' placeholder="Login" ng-model="user.username"/>
                    <input type='password' name='password' placeholder="Password" ng-model="user.password"/>
                    <input name="submit" type="submit" value="Login" class="login loginmodal-submit"/>
                </form>

                <div class="login-help">
                    <!--<a href="#">Zarejestruj</a> - <a href="#">Zapomniałes hasła?</a>-->
                </div>
            </div>
        </div>
    </div>

    <!-- Register-->
    <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="Register"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="registerModalContent">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h3 class="modal-title">Register</h3>
                </div>

                <div class="modal-body">
                    <form id="registerForm" method="post" action="account/register" class="form-horizontal">

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Username</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" id="username" name="username"/>
                            </div>
                        </div>

                        <p id="demoo" style="display:none"></p>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">First name</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" name="firstName"/>
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="col-xs-3 control-label">Last name</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" name="lastName"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Email</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" name="email"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Password</label>

                            <div class="col-xs-8">
                                <input type="password" class="form-control" name="password"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Retype password</label>

                            <div class="col-xs-8">
                                <input type="password" class="form-control" name="confirmPassword"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Phone number</label>

                            <div class="col-xs-8">
                                <input type="text" name="phone"
                                       class="input-medium bfh-phone form-control"
                                       id="form-phone" data-format="ddd ddd ddd"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">City</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" name="city"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Address</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" name="address"/>
                            </div>
                        </div>
                        <label for="checkCompany">
                            <input type="checkbox" id="checkCompany" onclick="ShowHideDiv(this)"/>
                            Register as company
                        </label>

                        <div id="companyName" class="form-group" style="display:none">
                            <label class="col-xs-3 control-label">Company name</label>

                            <div class="col-xs-8">
                                <input type="text" class="form-control" id="inputCompanyName" name="companyName"/>
                            </div>
                        </div>
                        <div id="companyDesc" class="form-group" style="display:none">
                            <label class="col-xs-3 control-label">Company description</label>

                            <div class="col-xs-8">
                                <textarea class="form-control" id="inputCompanyDesc" rows="8"
                                          name="companyDesc"></textarea>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-xs-5 col-xs-offset-3">
                                <button type="submit" class="btn btn-primary registerSubmit">Register</button>
                                <button type="reset" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('#registerForm').formValidation({
            framework: 'bootstrap',
            excluded: 'disabled',
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                username: {
                    validators: {
                        notEmpty: {
                            message: 'The username is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        },
                        callback: {
                            message: ''
//                            ,callback: function (value, validator, $field) {
//                                var xhttp = new XMLHttpRequest();
//                                xhttp.onreadystatechange = function () {
//                                    document.getElementById("demoo").innerText = xhttp.responseText;
//                                };
//                                var urlReq = "http://localhost:8080/account/checkUsername/" + document.getElementById("username").value;
//                                xhttp.open("GET", urlReq, false);
//                                xhttp.send();
//                                if($('p').html() != "-1") {
//                                    return {
//                                        valid: false,
//                                        message: "Username already exist!"
//                                    }
//                                }
//                                return true;
//                            }
                        }
                    }
                },
                firstName: {
                    validators: {
                        notEmpty: {
                            message: 'The first name is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                lastName: {
                    validators: {
                        notEmpty: {
                            message: 'The last name is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                email: {
                    validators: {
                        notEmpty: {
                            message: 'The email is required'
                        },
                        emailAddress: {
                            message: 'The value is not a valid email address'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                password: {
                    validators: {
                        notEmpty: {
                            message: 'The password is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                confirmPassword: {
                    validators: {
                        notEmpty: {},
                        identical: {
                            field: 'password',
                            message: 'The password and its confirm are not the same'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                city: {
                    validators: {
                        notEmpty: {
                            message: 'The city name is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                address: {
                    validators: {
                        notEmpty: {
                            message: 'The address is required'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        }
                    }
                },
                phone: {
                    validators: {
                        regexp: {
                            regexp: /^(\d{3}) (\d{3}) (\d{3}\d?)$/i,
                            message: 'The phone number is incorrect'
                        },
                        notEmpty: {
                            message: ' The phone number is required'
                        }

                    }
                },
                companyDesc: {
                    validators: {
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        },
                        callback: {
                            message: 'Wiaodmosc do was',
                            callback: function (value, validator, $field) {
                                var element = document.getElementById('companyDesc');
                                if (element.style.display == "block") {
                                    if (value === '') {
                                        return {
                                            valid: false,
                                            message: 'The company description is required'
                                        }
                                    }
                                }
                                return true;
                            }
                        }
                    }
                },
                companyName: {
                    validators: {
                        regexp: {
                            regexp: /^[a-zA-Z0-9_]+$/,
                            message: 'The name can only consist of alphabetical, number and underscore'
                        },
                        callback: {
                            message: 'Wiaodmosc do was',
                            callback: function (value, validator, $field) {
                                var element = document.getElementById('companyName');
                                if (element.style.display == "block") {
                                    if (value === '') {
                                        return {
                                            valid: false,
                                            message: 'The company name is required'
                                        }
                                    }
                                }
                                return true;
                            }
                        }
                    }
                }
            }

        });
    });
    $('#registerModal').on('hidden.bs.modal', function () {
        $('#registerForm').formValidation('resetForm', true);
        $('#checkCompany').prop('checked', false);
        document.getElementById("companyName").style.display = "none";
        document.getElementById("companyDesc").style.display = "none";
    });
</script>


</body>
</html>